/*
  backgrid-select-all
  http://github.com/wyuenho/backgrid

  Copyright (c) 2013 Jimmy Yuen Ho Wong
  Licensed under the MIT @license.
*/
(function(e,t,c,i,n){var l=n.Extension.SelectRowCell=i.View.extend({className:"select-row-cell",tagName:"td",events:{"change :checkbox":"onChange"},initialize:function(e){this.column=e.column,this.column instanceof n.Column||(this.column=new n.Column(this.column)),this.listenTo(this.model,"backgrid:select",function(e,t){this.$el.find(":checkbox").prop("checked",t).change()})},onChange:function(e){this.model.trigger("backgrid:selected",this.model,t(e.target).prop("checked"))},render:function(){return this.$el.empty().append('<input type="checkbox" />'),this.delegateEvents(),this}});n.Extension.SelectAllHeaderCell=l.extend({className:"select-all-header-cell",tagName:"th",initialize:function(e){this.column=e.column,this.column instanceof n.Column||(this.column=new n.Column(this.column));var t=this.collection,c=this.selectedModels={};this.listenTo(t,"backgrid:selected",function(e,t){t?c[e.id||e.cid]=e:(delete c[e.id||e.cid],this.$el.find(":checkbox").prop("checked",!1))}),this.listenTo(t,"remove",function(e){delete c[e.cid]}),this.listenTo(i,"backgrid:refresh",function(){this.$el.find(":checkbox").prop("checked",!1);for(var e=0;t.length>e;e++){var i=t.at(e);c[i.id||i.cid]&&i.trigger("backgrid:select",i,!0)}})},onChange:function(e){var c=t(e.target).prop("checked"),i=this.collection;i.each(function(e){e.trigger("backgrid:select",e,c)})}})})(window,jQuery,_,Backbone,Backgrid);