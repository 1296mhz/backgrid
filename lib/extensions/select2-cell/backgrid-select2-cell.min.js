/*
  backgrid-select2-cell
  http://github.com/wyuenho/backgrid

  Copyright (c) 2013 Jimmy Yuen Ho Wong and contributors
  Licensed under the MIT @license.
*/
(function(e,t,s){var i=s.Extension.Select2CellEditor=s.SelectCellEditor.extend({use$:!0,events:{close:"save",change:"save"},select2Options:null,initialize:function(){s.SelectCellEditor.prototype.initialize.apply(this,arguments),this.close=e.bind(this.close,this)},setSelect2Options:function(t){this.select2Options=e.extend({containerCssClass:"select2-container"},t||{})},render:function(){return s.SelectCellEditor.prototype.render.apply(this,arguments),this.$el.select2(this.select2Options),this.delegateEvents(),this},postRender:function(){var e=this;this.$el.parent().find("."+this.select2Options.containerCssClass).on("blur",function(t){t.relatedTarget||e.close(t)}).on("keydown",this.close).attr("tabindex",-1).focus()},remove:function(){return this.$el.select2("destroy"),s.SelectCellEditor.prototype.remove.apply(this,arguments)}});s.Extension.Select2Cell=s.SelectCell.extend({className:"select2-cell",editor:i,select2Options:null,initialize:function(e){s.SelectCell.prototype.initialize.apply(this,arguments),this.select2Options=e.select2Options||this.select2Options,this.listenTo(this.model,"backgrid:edit",function(e,t,s,i){t.get("name")==this.column.get("name")&&i.setSelect2Options(this.select2Options)})}})})(_,Backbone,Backgrid);